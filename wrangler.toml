name = "dhlottery-worker"
main = "src/index.ts"
compatibility_date = "2024-12-16"
compatibility_flags = ["nodejs_compat"]

# Cron trigger: Every Monday at 10:00 AM KST (01:00 UTC)
# KST = UTC+9, so 10:00 KST = 01:00 UTC
[triggers]
crons = ["0 1 * * 1"]

# Environment variables (non-sensitive)
[vars]
# Add non-secret configuration here if needed

[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

[placement]
mode = "smart"

# Secrets (configure via CLI: wrangler secret put <NAME>)
# Required secrets:
# - USER_ID: DHLottery user ID
# - PASSWORD: DHLottery password
# - TELEGRAM_BOT_TOKEN: Telegram bot token
# - TELEGRAM_CHAT_ID: Telegram chat ID
#
# Set secrets using:
# wrangler secret put USER_ID
# wrangler secret put PASSWORD
# wrangler secret put TELEGRAM_BOT_TOKEN
# wrangler secret put TELEGRAM_CHAT_ID
