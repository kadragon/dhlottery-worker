# Environment Configuration

runtime:
  platform: github-actions
  language: typescript
  target: es2021
  module: esnext

dependencies:
  required:
    - "tsx" # for TypeScript execution
  optional:
    - "vitest" # for testing

external_services:
  dhlottery:
    base_url: "https://dhlottery.co.kr"
    endpoints:
      main: "/common.do?method=main"
      login: "/userSsl.do?method=login"
      buy_ready: "/egovUserReadySocket.json"
      buy_exec: "/execBuy.do"
      charge_init: "/nicePay.do?method=nicePayInit" # legacy (spec draft)
      charge_init_kbank: "/kbank.do?method=kbankProcess" # verified endpoint
      winning_list: "/myPage.do?method=lottoBuyList"
    session:
      type: "cookie-based"
      header: "Set-Cookie"

  telegram:
    api_base: "https://api.telegram.org"
    method: "sendMessage"
    format: "markdown"

secrets:
  required:
    - USER_ID
    - PASSWORD
    - TELEGRAM_BOT_TOKEN
    - TELEGRAM_CHAT_ID
  storage: "GitHub Secrets"
  access_method: "process.env"

schedule:
  cron: "0 1 * * 1" # Every Monday at 01:00 UTC (10:00 KST)
  timezone: "UTC (displayed as KST+9)"
  frequency: "weekly"
  trigger: "GitHub Actions workflow_dispatch or scheduled"

business_rules:
  deposit:
    min_balance_for_purchase: 5000
    currency: "KRW"

  purchase:
    games_per_execution: 5
    cost_per_game: 1000
    total_cost: 5000
    mode: "automatic" # auto-generated numbers

  winning_check:
    period: "previous_week"
    start_day: "monday"
    end_day: "sunday"
    min_rank: 1

constraints:
  users: 1
  concurrent_executions: 1
  storage: "none"
  state: "stateless"

file_structure:
  source: "src/"
  specs: ".spec/"
  tasks: ".tasks/"
  governance: ".governance/"
  tests: "src/**/*.spec.ts"

development:
  test_framework: "vitest"
  test_strategy: "tdd"
  spec_strategy: "sdd"
